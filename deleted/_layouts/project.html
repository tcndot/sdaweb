<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title }} | {{ site.title }}</title>

  <!-- favicon + tailwind (same approach as your other layouts) -->
  <link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/logo4favicon.png">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    html, body { margin:0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#111; }
    .container { max-width:1120px; margin:0 auto; padding:22px; box-sizing:border-box; }

    /* Top image (map/photo) */
    .hero-photo { width:100%; height:420px; object-fit:cover; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.08); }

    /* centered details box */
    .details-box {
      max-width:820px;
      margin: -64px auto 18px auto; /* overlap slightly for nicer card look */
      background: white;
      border-radius:12px;
      box-shadow:0 14px 40px rgba(10,20,10,0.06);
      padding:20px;
      text-align:center;
    }
    .details-location { font-weight:800; font-size:1.25rem; color:#0b3a0b; }
    .details-sub { color:#444; margin-top:6px; }

    /* points list */
    .points { margin-top:16px; text-align:left; display:block; padding:10px 8px; }
    .point { padding:8px 0; border-bottom:1px dashed #eee; display:flex; gap:12px; align-items:flex-start; }
    .point strong { min-width:210px; display:inline-block; font-weight:800; color:#000; }
    .point .value { color:#111; }

    /* Q&A box (all black text, question bold) */
    .qa-box { background:#fff; border-radius:10px; padding:16px; margin-top:20px; box-shadow:0 8px 20px rgba(10,20,10,0.04); color:#000; }
    .qa-question { font-weight:800; margin-bottom:6px; display:block; }
    .qa-answer { margin-bottom:12px; display:block; }

    /* slideshow */
    .slider { position:relative; width:100%; max-width:1000px; margin:20px auto 0; border-radius:12px; overflow:hidden; }
    .slides { display:flex; transition:transform .35s ease; }
    .slide { min-width:100%; box-sizing:border-box; }
    .slide img { width:100%; height:520px; object-fit:cover; display:block; }

    .slider .nav-btn {
      position:absolute; top:50%; transform:translateY(-50%);
      background:rgba(255,255,255,0.92); border-radius:10px; padding:10px;
      box-shadow:0 6px 20px rgba(0,0,0,0.12); border:1px solid rgba(0,0,0,0.06);
      cursor:pointer;
    }
    .nav-left{ left:12px; } .nav-right{ right:12px; }

    @media (max-width:880px){
      .hero-photo{ height:260px; }
      .slide img{ height:320px; }
      .details-location{ font-size:1.05rem; }
      .point strong { min-width:140px; }
    }
  </style>
</head>
<body>

  {% include header.html %}

  <main class="container">

    <!-- Top map/photo -->
    {% if page.map_image %}
      <img src="{{ page.map_image }}" alt="Project map" class="hero-photo" />
    {% elsif page.image %}
      <img src="{{ page.image }}" alt="Project image" class="hero-photo" />
    {% else %}
      <div class="hero-photo" style="background:#f3f7f3; display:flex; align-items:center; justify-content:center; color:#8aa88a;">
        No project image provided
      </div>
    {% endif %}

    <!-- Centered details box -->
    <section class="details-box" aria-labelledby="project-title">
      <div id="project-title" class="details-location">
        {{ page.location | default: page.title }}
      </div>
      {% if page.subtitle %}
        <div class="details-sub">{{ page.subtitle }}</div>
      {% endif %}

      <!-- Points: use page.points as a list of objects in front matter -->
      {% if page.points %}
      <div class="points" role="list">
        {% for p in page.points %}
          <div class="point" role="listitem">
            <strong>{{ p.label }} :</strong>
            <div class="value">{{ p.value }}</div>
          </div>
        {% endfor %}
      </div>
      {% endif %}
    </section>

    <!-- Additional details (free-form content below the box) -->
    <section class="project-content max-w-[1000px] mx-auto mt-6">
      {{ content }}
    </section>

    <!-- Q&A Box (black text) -->
    {% if page.qa %}
    <section class="qa-box max-w-[1000px] mx-auto">
      {% for item in page.qa %}
        <div class="qa-item">
          <div class="qa-question">{{ item.q }}</div>
          <div class="qa-answer">{{ item.a }}</div>
        </div>
      {% endfor %}
    </section>
    {% endif %}

    <!-- Slideshow for gallery images -->
    {% assign gallery = page.gallery | default: page.photos | default: nil %}
    {% if gallery %}
    <div class="slider" id="projectSlider" aria-roledescription="carousel">
      <div class="slides" id="slides">
        {% for img in gallery %}
        <div class="slide"><img src="{{ img }}" alt="Project photo {{ forloop.index }}"></div>
        {% endfor %}
      </div>

      <button class="nav-btn nav-left" id="prevBtn" aria-label="Previous image">‹</button>
      <button class="nav-btn nav-right" id="nextBtn" aria-label="Next image">›</button>
    </div>
    {% endif %}

  </main>

  {% include footer.html %}

  <script>
    // Simple slider (works with 2+ images). Keyboard support + buttons.
    (function(){
      const slidesEl = document.getElementById('slides');
      if (!slidesEl) return;
      const slides = slidesEl.children;
      const total = slides.length;
      let idx = 0;

      function update() {
        slidesEl.style.transform = `translateX(-${idx * 100}%)`;
      }

      document.getElementById('nextBtn').addEventListener('click', function(){ idx = (idx+1) % total; update(); });
      document.getElementById('prevBtn').addEventListener('click', function(){ idx = (idx-1+total) % total; update(); });

      document.addEventListener('keydown', function(e){
        if (e.key === 'ArrowLeft') { idx = (idx-1+total) % total; update(); }
        if (e.key === 'ArrowRight') { idx = (idx+1) % total; update(); }
      });

      // optional: focus management for accessibility
      // start with first
      update();
    })();
  </script>

</body>
</html>
